# WN 0004 - Records as Dimensions

- **Status**: *Draft* 
- **Discussions-To:**  https://github.com/malloydata/malloy/discussions/1423, slack, gchat
- **Author:** lloyd tabb

In JSON, Parquet, BigQuery and other data structures nested data can be either singular or repeated.  Malloy today reads singular data but can not create it in a query.  Often, it would be really useful to be able to return data of a known structure for use in other things.  Adding a 'record' function in Malloy that can group dimensional values together and be treated like a single dimesion would be useful.

## Example
The `record()` function returns a nested namespace `user_data` with elements `name`, `id` and `age`.  Notice that `age` is a scalar calculation.  

```
source: users is ... {
  dimesion: user_data is record(
      name,
      id,
      age is years(now() to birth_date)
    )
}

source: orders .. {
  join_one: users ...

  view: by_user is {
    group_by: user_data
    aggregate: order_count
  }
}
```

## Implementation
Some databases support grouping by structs.  We can build a hash value of the scalar in databases that do not.  